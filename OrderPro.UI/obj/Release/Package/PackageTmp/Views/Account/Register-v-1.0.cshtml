@model OrderPro.UI.Models.RegisterModel
@{
    ViewBag.Title = "Register";

    string RegMsg = ViewBag.FromSignIn as string;
    string RegErrorMsg = ViewBag.Regerror as string;

    int i = 1;
}


@*<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>*@
@*get country code country name from here   https://help.shopify.com/themes/customization/store/get-customers-location*@




<div id="target">

    
@*for design int teliphone info*@
<link href="~/build/css/intlTelInput.css" rel="stylesheet" />
<link href="~/build/css/demo.css" rel="stylesheet" />

@*<script src="~/Scripts/jquery-2.1.1.min.js"></script> *@ @*for email validation @Url.Action("Register","Account")*@

<style>
    .flag-box
{
    width: 20px !important;
}

.country-name
{
    width: 400px !important;

}
    .dial-code {
     width: 20px !important;
    }
    </style>
 <section class="container new-signup">        
        
            <aside class="middle">
                
    <div class="box-container">
        
<form id='registration-form' action=""  method="POST" class="credentials_form register-form" style="width:100% !important">
    
    @* @Html.AntiForgeryToken()*@
    <h1>Create Account</h1>
    <ul>
        <li>
             <span class="error" style="font-size: 15px !important;width:85%">
                 @if (ViewBag.UserExists!=null)
                 {
                     <p>1. @ViewBag.UserExists</p>
                     
                 }
                 @if (ViewBag.Error != null)
                 {

                     foreach (var err in ViewBag.Error)
                     { 
                      <p>
                         @i @err
                      </p>
                         i++;
                     }
                 
                 }

             </span>
        </li>

        <li>
            <li>
                <label for="fos_user_registration_form_email" class="required">Email Address</label>                 

                <input type="email" id="fos_user_registration_form_email" name="Email" style="margin-left: 5px;" required="required" placeholder="Enter your primary email address" />
                <span class="error"></span>  @*fos_user_registration_form[email]*@

                <input type="hidden" id="Email" />
            </li>

            <span class="error" id='email-error' style="display: none;margin-bottom: 15px;margin-top: 0;color:red">
             
            </span>
        </li>
        <li>
            <li>
                <label for="fos_user_registration_form_phoneNo" class="required">Phone number</label>
               @* <input type="text" id="fos_user_registration_form_phoneNo" name="ContactNumber" required="required" placeholder="Enter your phone number" />*@
                 <input id="mobile-number" name="ContactNumber" type="tel" placeholder="Enter your phone number"  style="margin-left: 5px;width:230px !important">
                <span class="error" id="company" style="font-size: 13px !important; margin-left: 175px !important"></span>  @*fos_user_registration_form[phoneNo]*@

            </li>
        </li>
          <li>
            <li>
                <label for="fos_user_registration_form_Company" class="required">Company Name</label>
                <input type="text" id="fos_user_registration_form_Company" name="ComName"  style="margin-left: 5px;" required="required" placeholder="Enter your Company Name" />
                <span class="error"></span>  @*fos_user_registration_form[Company] *@
                
                <input type="text" id="CountryCode" name="CountryCode" style="display:none" />
                <input type="text" id="CountryName" name="CountryName" style="display:none" />
                <input type="text" id="ClientIp" name="ClientIp" style="display:none" />
                <input type="text" id="CompanyName" name="CompanyName" style="display:none" />
            </li>
        </li>

        

         @*<li>
            <li>
                <label for="fos_user_registration_form_Country" class="required">Country Name</label>
                <input type="text" id="fos_user_registration_form_Country" name="Country" required="required" placeholder="Enter your Country Name" style="margin-left: 5px;" />
                <span class="error"></span>  @*fos_user_registration_form[Country]

            </li>
        </li>*@
        <li>
            <label>Password</label>
            <input type="password" id="fos_user_registration_form_plainPassword_first" name="Password" required="required"  class="half" placeholder="Your password" style="margin-left: 5px;width: 230px !important" />
            <span class="error" id="Pass" style="font-size: 13px !important; margin-left: 175px !important"></span>  @*fos_user_registration_form[plainPassword][first]*@
        </li>
        <li>
            <label>Retype Password</label>
            <input type="password" id="fos_user_registration_form_plainPassword_second" name="ConfirmPassword" required="required"    class="half" placeholder="Repeat same password" style="margin-left: 5px;width: 230px !important" />
         <span id="retypepass" class="error" style="font-size: 13px !important; margin-left: 175px !important"></span>
        </li>  @*fos_user_registration_form[plainPassword][second]*@
        <li>
            <input type="checkbox" name="terms" id="terms"/>
            <label for="terms"><span>I agree with <a href="#" target="_blank">Terms and Condition</a></span></label>
            <span class="error" id='terms-error' style="display: none;">
                <ul>
                    <li>Please agree to our Terms and Conditions by selecting the check box.</li>
                </ul>
            </span>
        </li>

        <li>
            @*<button id="submit" class="cpsbtn register" value="Create New Account" onclick="checkPass()">Create New Account</button>*@
            <input id="submit" type="submit" class="cpsbtn register" value="Create New Account" />
            <a href="@Url.Action("Index","Account")" class="cpsbtn"  style="width: 100px" >Login</a>
        </li>

    </ul>
     
</form>



    </div>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="~/build/js/intlTelInput.min.js"></script>


@section Scripts
 {
 
    <script type="text/javascript">       

        var CountryCode;
        $(document).ready(function () {                      

            //get client country code Name and others

            jQuery.ajax({
                url: '//freegeoip.net/json/',   //
                type: 'POST',
                dataType: 'jsonp',
                success: function (location) {

                    //alert('Code' + location.country_code + ' Name :' + location.country_name + ' IP :' + location.ip);

                    CountryCode = location.country_code;

                    $("#CountryCode").val(location.country_code);
                    $("#CountryName").val(location.country_name);
                    $("#ClientIp").val(location.ip);

                    // example where I update content on the page.
                    //jQuery('#city').html(location.city);
                    //jQuery('#region-code').html(location.region_code);
                    //jQuery('#region-name').html(location.region_name);
                    //jQuery('#areacode').html(location.areacode);
                    //jQuery('#ip').html(location.ip);
                    //jQuery('#zipcode').html(location.zipcode);
                    //jQuery('#longitude').html(location.longitude);
                    //jQuery('#latitude').html(location.latitude);
                    //jQuery('#country-name').html(location.country_name);
                    //jQuery('#country-code').html(location.country_code);
                }
                
            });


            $("#mobile-number").intlTelInput({
                allowExtensions: true,
                autoFormat: false,
                autoHideDialCode: false,
                autoPlaceholder: false,
                defaultCountry: "auto",
                ipinfoToken: "yolo",
                nationalMode: false,
                numberType: "MOBILE",
                defaultCountry: "auto",
                //onlyCountries: ['us', 'gb', 'ch', 'ca', 'do'],
                //preferredCountries: ['cn', 'jp'],
                preventInvalidNumbers: true,
                utilsScript: "lib/libphonenumber/build/utils.js"
            });
         
            //var register = ['admin', 'abuse', 'postmaster', 'noc', 'root', 'security', 'sysadmin', 'compliance', 'registrar'];

            //$('#fos_user_registration_form_username').attr('placeholder', 'Username');
            $('#fos_user_registration_form_email').attr('placeholder', 'Email');
            $('#fos_user_registration_form_plainPassword_first').attr('placeholder', 'Password');
            $('#fos_user_registration_form_plainPassword_second').attr('placeholder', 'Retype Password');
            $('#fos_user_registration_form_firstName').attr('placeholder', 'First Name');
            $('#fos_user_registration_form_lastName').attr('placeholder', 'Last Name');
            $('#fos_user_registration_form_phoneNo').attr('placeholder', 'Phone Number');
            $('#fos_user_registration_form_Company').attr('placeholder', 'Company Name');
            $('#fos_user_registration_form_Country').attr('placeholder', 'Country Name');
            
            $("form").submit(function () {


                var username = $('#fos_user_registration_form_username').val();
             
                $("#CompanyName").val(document.getElementById("fos_user_registration_form_Company").value);                

                if (username.split(' ').length > 1) {
                    $('#fos_user_registration_form_username').focus();
                    $('#service-error').show();
                    return false;
                }
                
                var email = $('#fos_user_registration_form_email').val();

              
                document.getElementById("Email").value = email;
                
                  if (register.indexOf(email.split('@@')[0]) != -1) {
                      $('#fos_user_registration_form_email').focus();
                    $('#email-error').show();
                    return false;
                }

                if (!$('#terms').is(':checked')) {
                    $('#terms-error').show();
                    $('#terms').focus();
                    return false;
                }

            });

        });               
    </script>

  }
            </aside>

        
    </section>

    <aside class="bottom"></aside>    

</div>